âœ¦ Change summary: Renamed platform to Capfolio, introduced advanced risk analytics via ScenarioService, and added
  institutional Decision Package export capabilities.

  The changes significantly mature the platform's analytical capabilities and monorepo structure. The transition to
  icon-based primary actions in the Dash UI improves density, and the idempotent Makefile setup enhances developer
  experience.

  File: src/folib/services/export_service.py
  L396: [LOW] Dead expression with no effect.
  The line datetime.now().strftime("%Y%m%d_%H%M%S") generates a string but does not assign it to a variable or use it,
  making it dead code.

  Suggested change:
   1 -    datetime.now().strftime("%Y%m%d_%H%M%S")

  L423: [MEDIUM] Misleading stress PnL attribution for multi-position tickers.
  The contrib_map is built from drop_result.ticker_rows, which aggregates PnL at the ticker level. Mapping this to
  individual positions in positions_base_df will cause every position of the same ticker (e.g., multiple option legs) to
  display the total ticker PnL rather than the position's specific contribution, which can be misleading in a "Decision
  Grade" package.

  Suggested change:

    1 -    # Map ticker -> pnl contribution
    2 -    contrib_map = {r.ticker: r.pnl for r in drop_result.ticker_rows}
    3 +    # Map position description -> pnl contribution for granular attribution
    4 +    contrib_map = {r.description: r.pnl for r in drop_result.position_rows}
    5 
    6      # 3. Build DataFrames
    7 
    8 @@ -418,8 +418,8 @@ def write_decision_package(snapshot_id: int, output_dir: str) -> dict[str, str]:
    9      summary_base_df, positions_base_df = build_snapshot_export_frames_v2(snapshot_id)
   10 
   11      # Enrichment
   12 -    def get_contrib(ticker):
   13 -        return _fmt(contrib_map.get(ticker, 0.0))
   14 +    def get_contrib(row):
   15 +        # Use description if available, fallback to ticker
   16 +        desc = row.get("description") or row.get("ticker")
   17 +        return _fmt(contrib_map.get(desc, 0.0))
   18 
   19 -    positions_base_df["Stress PnL (-10%)"] = positions_base_df["ticker"].apply(
   20 -        get_contrib
   21 -    )
   22 +    positions_base_df["Stress PnL (-10%)"] = positions_base_df.apply(get_contrib, axis=1)

  File: src/folib/services/scenario_service.py
  L98: [MEDIUM] Silent omission of risk data when underlying price is missing.
  If underlying_price is missing or invalid, the position is skipped entirely from the expiry profile. While this
  prevents a crash, it can lead to a dangerously incomplete view of expiry risk (Gamma traps) without alerting the user
  that some legs were excluded.

  Suggested change:

   1              if underlying <= 0:
   2                  # Skip if we can't price it
   3 +                logger.error(f"Cannot include {pos.description} in expiry profile: missing underlying price.")
   4                  continue

  File: src/folio/dash_app.py
  L3912: [LOW] UI behavioral change removes status text.
  The callback now returns only an icon (spinner or html.I) where it previously returned a list including
  "Refreshing..." or "Refreshed" text. While this matches the new compact header design, the "success" state (bi-check2)
  might be too subtle for users to notice that a refresh actually completed successfully.

  Suggested change:
  (None required if icon-only design is strictly intended, but consider adding a temporary success message elsewhere if
  users find it too quiet.)