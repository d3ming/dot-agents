• Yep — latest commit 47ce7e0 fixes the original crash.

  - The KeyError: 'description' is resolved because build_snapshot_export_frames_v2() now includes "description" in the
    columns list used to construct positions_df (src/folib/services/export_service.py:354), which matches the later
    lookup in write_decision_package() (src/folib/services/export_service.py:454).
  - One follow-on: the integration test was mocking build_snapshot_export_frames_v2() without a description column, so
    it would now fail (same KeyError). I updated tests/integration/test_export_scenarios.py:63 to include description in
    the mocked positions_base_df, and also mocked ScenarioService + compute_drop_contributions to avoid forbidden
    network calls during tests.
  - Verified: poetry run pytest tests/integration/test_export_scenarios.py::test_write_decision_package -q passes
    locally after the test update.

  Potential functional nit (not a crash): in the data/exports/2026-01-12/portfolio_state.csv generated by make export,
  the new Stress PnL (-10%)/(-20%) columns exist but were all 0 in my spot-check, which suggests the description values
  in the export may not match the PositionContribution.description strings coming out of compute_drop_contributions().
  If you want, I can make that attribution key deterministic (e.g., ticker+expiry+strike+type) so stress PnL reliably
  populates.
